import{C as q,u as L,m as o,F as _,G as A,y as b,n as s,q as v,z as B}from"./vendor-c9b2872b.js";import{p as u,g as x,S as D,t as f,c as F,y as G,s as R,E as T}from"./index-a113095d.js";import{L as U}from"./loading-3c5d2442.js";const $="/assets/empty-8f18b8b1.svg";async function S(m){let t="0",a="+0%",d=!1;try{const r=await F(m),p=await G(m);if(r.length){const c=v(r[0].price);if(t=c,p.length){const i=v(p[0].price);if(d=Number(i)>Number(c),d){const l=Number(i)-Number(c);a=`-${f(l/Number(i)*100)}%`}else{const l=Number(c)-Number(i);a=`+${f(l/Number(i)*100)}%`}}}}catch{}return{price:t,quote:a,isDrop:d}}function J(){const m=q(),{t}=L(),[a,d]=o.useState(""),[r,p]=o.useState("USDT"),[c,i]=o.useState(0),[l,j]=o.useState([]),[g,y]=o.useState(!1);o.useEffect(()=>{a.length&&_(a)?k():j([])},[a,r]);async function k(){y(!0);const e=[];for(let n=0;n<u.length;n++){if(!(A(u[n].token.address,a)&&u[n].gold.symbol.toLowerCase()===r.toLowerCase()))continue;const h=await S(u[n].address);e.push({...u[n],...h});break}if(e.length===0){const h=await b(T).read.getPair([a,x[c].address]);if(BigInt(h)>0){const N=b({abi:B,address:a}),w=await S(h),P=await N.read.symbol(),E=await N.read.decimals();e.push({...w,gold:x[c],token:{symbol:P,decimals:E,address:a,name:"",totalSupply:0n,balance:"0"},address:h,volume:"0",marketValue:"0"})}}j(e),y(!1)}function C(e){d(e.target.value)}function I(e){sessionStorage.setItem("pair",R(e)),location.href=`${location.origin}/dex/#/`}return s.jsxs("div",{className:"search-token",children:[s.jsxs("div",{className:"header",children:[s.jsxs("div",{className:"search-input",children:[s.jsx("img",{src:D}),s.jsx("input",{type:"text",autoFocus:!0,value:a,onChange:C})]}),s.jsx("span",{onClick:()=>m(-1),children:t("cancel")})]}),s.jsxs("div",{className:"hot",children:[s.jsx("span",{className:"title",children:t("market")}),s.jsx("div",{className:"list",children:x.map((e,n)=>s.jsx("span",{className:e.symbol===r?"active":"",onClick:()=>{p(e.symbol),i(n)},children:e.symbol},e.address))})]}),s.jsxs("div",{className:"result",children:[a.length?s.jsx("h4",{className:"title",children:t("search_results")}):null,g?s.jsxs("div",{className:"loading",children:[s.jsx("img",{src:U}),s.jsx("span",{children:t("searching")})]}):null,!g&&a.length>0&&l.length===0?s.jsxs("div",{className:"empty",children:[s.jsx("img",{src:$}),s.jsx("span",{children:t("no_search_content_yet")})]}):null,!g&&l.length?s.jsxs("div",{className:"list",children:[s.jsxs("div",{className:"title",children:[s.jsx("span",{children:t("currency")}),s.jsx("span",{children:t("last_price")}),s.jsx("span",{children:t("quote_change")})]}),l.map(e=>s.jsxs("div",{className:"list-item",onClick:()=>I(e),children:[s.jsxs("div",{className:"token",children:[e.token.logoURI?s.jsx("img",{className:"logo",src:e.token.logoURI}):s.jsx("i",{className:"logo"}),s.jsxs("span",{children:[s.jsxs("span",{children:[e.token.symbol,"/"]}),e.gold.symbol]})]}),s.jsx("span",{className:"price",children:f(e.price,3)}),s.jsx("span",{className:e.isDrop?"quote drop":"quote",children:e.quote})]},e.address))]}):null]})]})}export{J as default};
