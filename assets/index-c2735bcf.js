import{u as A,m as i,D as I,E as B,F as g,y as j,n as s,z as P}from"./vendor-c9b2872b.js";import{a as L,E as y,T as c,g as k}from"./index-61491af1.js";import{A as O,B as D}from"./arrow-c642ba87.js";import"./loading-3c5d2442.js";const F=j(y);function U(){const{t:e}=A(),[l,b]=i.useState(L),[m,h]=i.useState(!1),[t,f]=i.useState(""),[v,d]=i.useState(!1),[p,o]=i.useState({symbol:null,decimals:0}),{write:N,data:u,isLoading:C}=I({...y,functionName:"createPair"}),{data:G,isLoading:T,isSuccess:x}=B({hash:u==null?void 0:u.hash});i.useEffect(()=>{if(g(t)){const n=j({address:t,abi:P});n.read.symbol().then(a=>{o(r=>({...r,symbol:a})),d(!0)}).catch(a=>{d(!1),o({symbol:null,decimals:0})}),n.read.decimals().then(a=>{o(r=>({...r,decimals:a})),d(!0)}).catch(a=>{d(!1),o({symbol:null,decimals:0})})}else o({symbol:null,decimals:0})},[t]),i.useEffect(()=>{x&&(f(""),c(e("tips.successful_listing")))},[x]);function S(n){b(k[n]),h(!1)}function _(n){f(n.target.value)}async function w(n,a){const r=await F.read.getPair([n,a]);return BigInt(r)>0}async function E(){if(t.length===0)return c(e("tips.enter_token"));if(g(t))if(v){if(await w(l.address,t))return c(e("tips.has_market"),"25vh")}else return c(e("tips.not_token"));else return c(e("tips.invalid_token"));N({args:[l.address,t]})}return s.jsx("div",{className:"add-token-pc",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{className:"title",children:e("quick_listing")}),s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:e("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!m),children:[s.jsx("span",{children:l.symbol}),s.jsx("img",{src:O})]}),m?s.jsx("div",{className:"options",children:k.map((n,a)=>s.jsx("span",{className:n.symbol===l.symbol?"active":"",onClick:()=>S(a),children:n.symbol},n.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:l.address})]}),s.jsx("span",{className:"label",children:e("token_address")}),s.jsx("input",{type:"text",value:t,onChange:_}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[e("token_symbol"),p.symbol??e("unknown")]}),s.jsxs("span",{children:[e("decimals"),p.decimals]})]}),s.jsx(D,{isLoading:C||T,onClick:E,children:e("confirm")})]})]})})}export{U as default};
