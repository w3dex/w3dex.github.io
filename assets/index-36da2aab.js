import{k as A,j as i,x as I,y as B,z as k,t as j,l as s,v as O}from"./vendor-7a5ef3cb.js";import{U as P,E as v,g}from"./index-d6690925.js";import{T as c,A as L,B as G}from"./arrow-58e9f879.js";import"./loading-3c5d2442.js";const U=j(v);function R(){const{t}=A(),[r,N]=i.useState(P),[u,h]=i.useState(!1),[n,m]=i.useState(""),[C,l]=i.useState(!1),[f,p]=i.useState({symbol:t("unknown"),decimals:0}),{write:T,data:d,isLoading:y}=I({...v,functionName:"createPair"}),{data:W,isLoading:S,isSuccess:x}=B({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(k(n)){const e=j({address:n,abi:O});e.read.symbol().then(a=>{p(o=>({...o,symbol:a})),l(!0)}).catch(a=>{l(!1)}),e.read.decimals().then(a=>{p(o=>({...o,decimals:a})),l(!0)}).catch(a=>{l(!1)})}},[n]),i.useEffect(()=>{x&&(m(""),c(t("tips.successful_listing")))},[x]);function _(e){N(g[e]),h(!1)}function b(e){m(e.target.value)}async function w(e,a){const o=await U.read.getPair([e,a]);return BigInt(o)>0}async function E(){if(n.length===0)return c(t("tips.enter_token"));if(k(n))if(C){if(await w(r.address,n))return c(t("tips.has_market"),"25vh")}else return c(t("tips.not_token"));else return c(t("tips.invalid_token"));T({args:[r.address,n]})}return s.jsx("div",{className:"add-token-pc",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{className:"title",children:t("quick_listing")}),s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:t("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:r.symbol}),s.jsx("img",{src:L})]}),u?s.jsx("div",{className:"options",children:Object.keys(g).map(e=>s.jsx("span",{className:e===r.symbol?"active":"",onClick:()=>_(e),children:e},e))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:r.address})]}),s.jsx("span",{className:"label",children:t("token_address")}),s.jsx("input",{type:"text",value:n,onChange:b}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[t("token_symbol"),f.symbol]}),s.jsxs("span",{children:[t("decimals"),f.decimals]})]}),s.jsx(G,{isLoading:y||S,onClick:E,children:t("confirm")})]})]})})}export{R as default};
