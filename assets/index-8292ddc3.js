import{u as A,m as i,D as I,E as B,F as g,y as j,n as s,z as P}from"./vendor-c9b2872b.js";import{a as L,E as v,T as c,g as k}from"./index-51ad4c34.js";import{A as O,B as D}from"./arrow-c642ba87.js";import"./loading-3c5d2442.js";const F=j(v);function U(){const{t:e}=A(),[r,y]=i.useState(L),[u,h]=i.useState(!1),[t,m]=i.useState(""),[N,l]=i.useState(!1),[f,p]=i.useState({symbol:e("unknown"),decimals:0}),{write:b,data:d,isLoading:C}=I({...v,functionName:"createPair"}),{data:G,isLoading:T,isSuccess:x}=B({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(g(t)){const n=j({address:t,abi:P});n.read.symbol().then(a=>{p(o=>({...o,symbol:a})),l(!0)}).catch(a=>{l(!1)}),n.read.decimals().then(a=>{p(o=>({...o,decimals:a})),l(!0)}).catch(a=>{l(!1)})}},[t]),i.useEffect(()=>{x&&(m(""),c(e("tips.successful_listing")))},[x]);function S(n){y(k[n]),h(!1)}function _(n){m(n.target.value)}async function w(n,a){const o=await F.read.getPair([n,a]);return BigInt(o)>0}async function E(){if(t.length===0)return c(e("tips.enter_token"));if(g(t))if(N){if(await w(r.address,t))return c(e("tips.has_market"),"25vh")}else return c(e("tips.not_token"));else return c(e("tips.invalid_token"));b({args:[r.address,t]})}return s.jsx("div",{className:"add-token-pc",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{className:"title",children:e("quick_listing")}),s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:e("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:r.symbol}),s.jsx("img",{src:O})]}),u?s.jsx("div",{className:"options",children:k.map((n,a)=>s.jsx("span",{className:n.symbol===r.symbol?"active":"",onClick:()=>S(a),children:n.symbol},n.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:r.address})]}),s.jsx("span",{className:"label",children:e("token_address")}),s.jsx("input",{type:"text",value:t,onChange:_}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[e("token_symbol"),f.symbol]}),s.jsxs("span",{children:[e("decimals"),f.decimals]})]}),s.jsx(D,{isLoading:C||T,onClick:E,children:e("confirm")})]})]})})}export{U as default};
