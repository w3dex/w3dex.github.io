import{k as A,j as i,y as B,z as I,B as k,v as j,l as s,w as O}from"./vendor-5ece6950.js";import{U as P,E as v,g}from"./index-3bd7f588.js";import{T as c,A as L,B as G}from"./arrow-5696b896.js";import"./loading-3c5d2442.js";const U=j(v);function R(){const{t:n}=A(),[r,N]=i.useState(P),[u,h]=i.useState(!1),[t,m]=i.useState(""),[C,l]=i.useState(!1),[f,p]=i.useState({symbol:n("unknown"),decimals:0}),{write:T,data:d,isLoading:y}=B({...v,functionName:"createPair"}),{data:W,isLoading:S,isSuccess:x}=I({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(k(t)){const e=j({address:t,abi:O});e.read.symbol().then(a=>{p(o=>({...o,symbol:a})),l(!0)}).catch(a=>{l(!1)}),e.read.decimals().then(a=>{p(o=>({...o,decimals:a})),l(!0)}).catch(a=>{l(!1)})}},[t]),i.useEffect(()=>{x&&(m(""),c(n("tips.successful_listing")))},[x]);function _(e){N(g[e]),h(!1)}function b(e){m(e.target.value)}async function w(e,a){const o=await U.read.getPair([e,a]);return BigInt(o)>0}async function E(){if(t.length===0)return c(n("tips.enter_token"));if(k(t))if(C){if(await w(r.address,t))return c(n("tips.has_market"),"25vh")}else return c(n("tips.not_token"));else return c(n("tips.invalid_token"));T({args:[r.address,t]})}return s.jsx("div",{className:"add-token-pc",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{className:"title",children:n("quick_listing")}),s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:n("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:r.symbol}),s.jsx("img",{src:L})]}),u?s.jsx("div",{className:"options",children:Object.keys(g).map(e=>s.jsx("span",{className:e===r.symbol?"active":"",onClick:()=>_(e),children:e},e))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:r.address})]}),s.jsx("span",{className:"label",children:n("token_address")}),s.jsx("input",{type:"text",value:t,onChange:b}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[n("token_symbol"),f.symbol]}),s.jsxs("span",{children:[n("decimals"),f.decimals]})]}),s.jsx(G,{isLoading:y||S,onClick:E,children:n("confirm")})]})]})})}export{R as default};
