import{C as B,u as I,m as i,D as P,E as L,F as g,y as j,n as s,z as O}from"./vendor-c9b2872b.js";import{a as D,T as c,g as k,E as v}from"./index-61491af1.js";import{A as F,B as G}from"./arrow-c642ba87.js";import"./loading-3c5d2442.js";const W="/assets/back-b87274f6.svg",q=j(v);function K(){const b=B(),{t:e}=I(),[l,y]=i.useState(D),[m,h]=i.useState(!1),[t,f]=i.useState(""),[C,d]=i.useState(!1),[p,o]=i.useState({symbol:null,decimals:0}),{write:N,data:u,isLoading:T}=P({...v,functionName:"createPair"}),{data:z,isLoading:S,isSuccess:x}=L({hash:u==null?void 0:u.hash});i.useEffect(()=>{if(g(t)){const a=j({address:t,abi:O});a.read.symbol().then(n=>{o(r=>({...r,symbol:n})),d(!0)}).catch(n=>{d(!1),o({symbol:null,decimals:0})}),a.read.decimals().then(n=>{o(r=>({...r,decimals:n})),d(!0)}).catch(n=>{d(!1),o({symbol:null,decimals:0})})}else o({symbol:null,decimals:0})},[t]),i.useEffect(()=>{x&&(f(""),c(e("tips.successful_listing")))},[x]);function _(a){y(k[a]),h(!1)}function w(a){f(a.target.value)}async function E(a,n){const r=await q.read.getPair([a,n]);return BigInt(r)>0}async function A(){if(t.length===0)return c(e("tips.enter_token"),"25vh");if(g(t))if(C){if(await E(l.address,t))return c(e("tips.has_market"),"25vh")}else return c(e("tips.not_token"),"25vh");else return c(e("tips.invalid_token"),"25vh");N({args:[l.address,t]})}return s.jsxs("div",{className:"add-token",children:[s.jsxs("div",{className:"navbar",children:[s.jsx("img",{src:W,onClick:()=>b(-1)}),s.jsx("span",{children:e("quick_listing")})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:e("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!m),children:[s.jsx("span",{children:l.symbol}),s.jsx("img",{src:F})]}),m?s.jsx("div",{className:"options",children:k.map((a,n)=>s.jsx("span",{className:a.symbol===l.symbol?"active":"",onClick:()=>_(n),children:a.symbol},a.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:l.address})]}),s.jsx("span",{className:"label",children:e("token_address")}),s.jsx("input",{type:"text",value:t,onChange:w}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[e("token_symbol"),p.symbol??e("unknown")]}),s.jsxs("span",{children:[e("decimals"),p.decimals]})]})]}),s.jsx(G,{isLoading:T||S,onClick:A,children:e("confirm")})]})]})}export{K as default};
