import{B as A,u as I,n as i,C as P,D as L,E as g,y as j,o as s,z as O}from"./vendor-4f1f40a6.js";import{U as D,g as k,E as v}from"./index-73e58dbd.js";import{T as c,A as G,B as U}from"./arrow-f3f68efa.js";import"./loading-3c5d2442.js";const W="/assets/back-b87274f6.svg",q=j(v);function K(){const b=A(),{t:e}=I(),[o,y]=i.useState(D),[u,h]=i.useState(!1),[t,m]=i.useState(""),[C,l]=i.useState(!1),[f,p]=i.useState({symbol:e("unknown"),decimals:0}),{write:N,data:d,isLoading:T}=P({...v,functionName:"createPair"}),{data:z,isLoading:S,isSuccess:x}=L({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(g(t)){const a=j({address:t,abi:O});a.read.symbol().then(n=>{p(r=>({...r,symbol:n})),l(!0)}).catch(n=>{l(!1)}),a.read.decimals().then(n=>{p(r=>({...r,decimals:n})),l(!0)}).catch(n=>{l(!1)})}},[t]),i.useEffect(()=>{x&&(m(""),c(e("tips.successful_listing")))},[x]);function _(a){y(k[a]),h(!1)}function w(a){m(a.target.value)}async function E(a,n){const r=await q.read.getPair([a,n]);return BigInt(r)>0}async function B(){if(t.length===0)return c(e("tips.enter_token"),"25vh");if(g(t))if(C){if(await E(o.address,t))return c(e("tips.has_market"),"25vh")}else return c(e("tips.not_token"),"25vh");else return c(e("tips.invalid_token"),"25vh");N({args:[o.address,t]})}return s.jsxs("div",{className:"add-token",children:[s.jsxs("div",{className:"navbar",children:[s.jsx("img",{src:W,onClick:()=>b(-1)}),s.jsx("span",{children:e("quick_listing")})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:e("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:o.symbol}),s.jsx("img",{src:G})]}),u?s.jsx("div",{className:"options",children:k.map((a,n)=>s.jsx("span",{className:a.symbol===o.symbol?"active":"",onClick:()=>_(n),children:a.symbol},a.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:o.address})]}),s.jsx("span",{className:"label",children:e("token_address")}),s.jsx("input",{type:"text",value:t,onChange:w}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[e("token_symbol"),f.symbol]}),s.jsxs("span",{children:[e("decimals"),f.decimals]})]})]}),s.jsx(U,{isLoading:T||S,onClick:B,children:e("confirm")})]})]})}export{K as default};
