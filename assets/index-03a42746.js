import{w as B,k as I,j as i,x as O,y as P,z as g,t as j,l as s,v as L}from"./vendor-7a5ef3cb.js";import{U as G,g as k,E as v}from"./index-77106ada.js";import{T as o,A as U,B as W}from"./arrow-d0715987.js";import"./loading-3c5d2442.js";const q="/assets/back-b87274f6.svg",z=j(v);function K(){const N=B(),{t:a}=I(),[r,C]=i.useState(G),[u,h]=i.useState(!1),[n,m]=i.useState(""),[b,l]=i.useState(!1),[f,p]=i.useState({symbol:a("unknown"),decimals:0}),{write:y,data:d,isLoading:T}=O({...v,functionName:"createPair"}),{data:D,isLoading:S,isSuccess:x}=P({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(g(n)){const e=j({address:n,abi:L});e.read.symbol().then(t=>{p(c=>({...c,symbol:t})),l(!0)}).catch(t=>{l(!1)}),e.read.decimals().then(t=>{p(c=>({...c,decimals:t})),l(!0)}).catch(t=>{l(!1)})}},[n]),i.useEffect(()=>{x&&(m(""),o(a("tips.successful_listing")))},[x]);function _(e){C(k[e]),h(!1)}function w(e){m(e.target.value)}async function E(e,t){const c=await z.read.getPair([e,t]);return BigInt(c)>0}async function A(){if(n.length===0)return o(a("tips.enter_token"),"25vh");if(g(n))if(b){if(await E(r.address,n))return o(a("tips.has_market"),"25vh")}else return o(a("tips.not_token"),"25vh");else return o(a("tips.invalid_token"),"25vh");y({args:[r.address,n]})}return s.jsxs("div",{className:"add-token",children:[s.jsxs("div",{className:"navbar",children:[s.jsx("img",{src:q,onClick:()=>N(-1)}),s.jsx("span",{children:a("quick_listing")})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:a("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:r.symbol}),s.jsx("img",{src:U})]}),u?s.jsx("div",{className:"options",children:Object.keys(k).map(e=>s.jsx("span",{className:e===r.symbol?"active":"",onClick:()=>_(e),children:e},e))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:r.address})]}),s.jsx("span",{className:"label",children:a("token_address")}),s.jsx("input",{type:"text",value:n,onChange:w}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[a("token_symbol"),f.symbol]}),s.jsxs("span",{children:[a("decimals"),f.decimals]})]})]}),s.jsx(W,{isLoading:T||S,onClick:A,children:a("confirm")})]})]})}export{K as default};
