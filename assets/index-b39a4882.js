import{u as E,l as I,j as A,n as t,E as B,F as k,B as G,q as s,G as O,J as P,K as q}from"./vendor-2def24a5.js";import{C as F,g as u,c as C}from"./index-0ded26c4.js";import{A as W,B as H}from"./arrow-b1540fe7.js";import{T as c}from"./index-42d86a41.js";import"./loading-894c7183.js";function D(){const i=E(),{address:f}=I(),{t:a}=A(),[n,h]=t.useState(),[m,p]=t.useState(!1),[o,x]=t.useState(""),[v,g]=t.useState(!1),[j,l]=t.useState({}),[y,N]=t.useState(),{status:d}=B({hash:y});t.useEffect(()=>{i in F&&h(u[i][0])},[i]),t.useEffect(()=>{f&&k(o)?(async()=>{try{const{symbol:e,decimals:r}=await G({address:f,token:o});l({symbol:e,decimals:r}),g(!0)}catch(e){console.error(e),l({}),g(!1)}})():l({})},[i,o]),t.useEffect(()=>{d==="success"&&(x(""),c(a("tips.successful_listing")))},[d]);function b(e){h(u[i][e]),p(!1)}function w(e){x(e.target.value)}async function T(e,r){const S=await q({...C[i].ControllerConfig,functionName:"getPair",args:[e,r]});return BigInt(S)>0}async function _(){if(n){if(o.length===0)return c(a("tips.enter_token"));if(k(o))if(v){if(await T(n.address,o))return c(a("tips.has_market"),"25vh")}else return c(a("tips.not_token"));else return c(a("tips.invalid_token"));const e=await O({...C[i].ControllerConfig,functionName:"createPair",args:[n.address,o]}),{hash:r}=await P(e);N(r)}}return s.jsx("div",{className:"add-token-pc",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{className:"title",children:a("quick_listing")}),s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:a("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>p(!m),children:[s.jsx("span",{children:n?n.symbol:""}),s.jsx("img",{src:W})]}),m?s.jsx("div",{className:"options",children:(u[i]??[]).map((e,r)=>s.jsx("span",{className:e.symbol===(n?n.symbol:"")?"active":"",onClick:()=>b(r),children:e.symbol},e.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:n?n.address:""})]}),s.jsx("span",{className:"label",children:a("token_address")}),s.jsx("input",{type:"text",value:o,onChange:w}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[a("token_symbol"),j.symbol??a("unknown")]}),s.jsxs("span",{children:[a("decimals"),j.decimals??0]})]}),s.jsx(H,{isLoading:d==="loading",onClick:_,children:a("confirm")})]})]})})}export{D as default};
