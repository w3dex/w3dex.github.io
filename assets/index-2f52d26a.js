import{x as A,k as I,j as i,y as P,z as L,B as g,v as j,l as s,w as O}from"./vendor-5ece6950.js";import{U as G,g as k,E as v}from"./index-3950234c.js";import{T as c,A as U,B as W}from"./arrow-54b13c0c.js";import"./loading-3c5d2442.js";const q="/assets/back-b87274f6.svg",z=j(v);function K(){const b=A(),{t:e}=I(),[r,y]=i.useState(G),[u,h]=i.useState(!1),[t,m]=i.useState(""),[N,l]=i.useState(!1),[f,p]=i.useState({symbol:e("unknown"),decimals:0}),{write:C,data:d,isLoading:T}=P({...v,functionName:"createPair"}),{data:D,isLoading:S,isSuccess:x}=L({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(g(t)){const a=j({address:t,abi:O});a.read.symbol().then(n=>{p(o=>({...o,symbol:n})),l(!0)}).catch(n=>{l(!1)}),a.read.decimals().then(n=>{p(o=>({...o,decimals:n})),l(!0)}).catch(n=>{l(!1)})}},[t]),i.useEffect(()=>{x&&(m(""),c(e("tips.successful_listing")))},[x]);function _(a){y(k[a]),h(!1)}function w(a){m(a.target.value)}async function B(a,n){const o=await z.read.getPair([a,n]);return BigInt(o)>0}async function E(){if(t.length===0)return c(e("tips.enter_token"),"25vh");if(g(t))if(N){if(await B(r.address,t))return c(e("tips.has_market"),"25vh")}else return c(e("tips.not_token"),"25vh");else return c(e("tips.invalid_token"),"25vh");C({args:[r.address,t]})}return s.jsxs("div",{className:"add-token",children:[s.jsxs("div",{className:"navbar",children:[s.jsx("img",{src:q,onClick:()=>b(-1)}),s.jsx("span",{children:e("quick_listing")})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:e("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:r.symbol}),s.jsx("img",{src:U})]}),u?s.jsx("div",{className:"options",children:k.map((a,n)=>s.jsx("span",{className:a.symbol===r.symbol?"active":"",onClick:()=>_(n),children:a.symbol},a.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:r.address})]}),s.jsx("span",{className:"label",children:e("token_address")}),s.jsx("input",{type:"text",value:t,onChange:w}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[e("token_symbol"),f.symbol]}),s.jsxs("span",{children:[e("decimals"),f.decimals]})]})]}),s.jsx(W,{isLoading:T||S,onClick:E,children:e("confirm")})]})]})}export{K as default};
