import{u as A,n as i,C as I,D as B,E as g,y as j,o as s,z as P}from"./vendor-4f1f40a6.js";import{U as L,E as v,g as k}from"./index-73e58dbd.js";import{T as c,A as O,B as D}from"./arrow-f3f68efa.js";import"./loading-3c5d2442.js";const G=j(v);function R(){const{t:e}=A(),[o,y]=i.useState(L),[u,h]=i.useState(!1),[t,m]=i.useState(""),[C,l]=i.useState(!1),[f,p]=i.useState({symbol:e("unknown"),decimals:0}),{write:N,data:d,isLoading:b}=I({...v,functionName:"createPair"}),{data:U,isLoading:T,isSuccess:x}=B({hash:d==null?void 0:d.hash});i.useEffect(()=>{if(g(t)){const n=j({address:t,abi:P});n.read.symbol().then(a=>{p(r=>({...r,symbol:a})),l(!0)}).catch(a=>{l(!1)}),n.read.decimals().then(a=>{p(r=>({...r,decimals:a})),l(!0)}).catch(a=>{l(!1)})}},[t]),i.useEffect(()=>{x&&(m(""),c(e("tips.successful_listing")))},[x]);function S(n){y(k[n]),h(!1)}function _(n){m(n.target.value)}async function w(n,a){const r=await G.read.getPair([n,a]);return BigInt(r)>0}async function E(){if(t.length===0)return c(e("tips.enter_token"));if(g(t))if(C){if(await w(o.address,t))return c(e("tips.has_market"),"25vh")}else return c(e("tips.not_token"));else return c(e("tips.invalid_token"));N({args:[o.address,t]})}return s.jsx("div",{className:"add-token-pc",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{className:"title",children:e("quick_listing")}),s.jsxs("div",{className:"form",children:[s.jsx("span",{className:"label",children:e("trading_pair")}),s.jsxs("div",{className:"input",children:[s.jsxs("div",{className:"prefix",children:[s.jsxs("div",{className:"selected",onClick:()=>h(!u),children:[s.jsx("span",{children:o.symbol}),s.jsx("img",{src:O})]}),u?s.jsx("div",{className:"options",children:k.map((n,a)=>s.jsx("span",{className:n.symbol===o.symbol?"active":"",onClick:()=>S(a),children:n.symbol},n.address))}):null]}),s.jsx("input",{type:"text",readOnly:!0,value:o.address})]}),s.jsx("span",{className:"label",children:e("token_address")}),s.jsx("input",{type:"text",value:t,onChange:_}),s.jsxs("div",{className:"token-info",children:[s.jsxs("span",{children:[e("token_symbol"),f.symbol]}),s.jsxs("span",{children:[e("decimals"),f.decimals]})]}),s.jsx(D,{isLoading:b||T,onClick:E,children:e("confirm")})]})]})})}export{R as default};
