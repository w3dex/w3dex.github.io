import{w as P,k as E,j as h,z as q,A as L,t as N,l as s,m as y,v as _}from"./vendor-7a5ef3cb.js";import{p as u,g as p,S as A,a as x,c as B,y as D,s as R,E as T}from"./index-77106ada.js";import{L as U}from"./loading-3c5d2442.js";const $="/assets/empty-8f18b8b1.svg";async function v(m){let t="0",a="+0%",l=!1;try{const n=await B(m),g=await D(m);if(n.length){const r=y(n[0].price);if(t=r,g.length){const c=y(g[0].price);if(l=Number(c)>Number(r),l){const o=Number(c)-Number(r);a=`-${x(o/Number(c)*100)}%`}else{const o=Number(r)-Number(c);a=`+${x(o/Number(c)*100)}%`}}}}catch{}return{price:t,quote:a,isDrop:l}}function O(){const m=P(),{t}=E(),[a,l]=h.useState(""),[n,g]=h.useState("USDT"),[r,c]=h.useState([]),[o,f]=h.useState(!1);h.useEffect(()=>{a.length&&q(a)?b():c([])},[a,n]);async function b(){f(!0);const e=[];for(let i=0;i<u.length;i++){if(!(L(u[i].token.address,a)&&u[i].gold.symbol.toLowerCase()===n.toLowerCase()))continue;const d=await v(u[i].address);e.push({...u[i],...d});break}if(e.length===0){const d=await N(T).read.getPair([a,p[n].address]);if(BigInt(d)>0){const j=N({abi:_,address:a}),C=await v(d),w=await j.read.symbol(),I=await j.read.decimals();e.push({...C,gold:p[n],token:{symbol:w,decimals:I,address:a,name:"",totalSupply:0n,balance:"0"},address:d})}}c(e),f(!1)}function k(e){l(e.target.value)}function S(e){sessionStorage.setItem("pair",R(e)),location.href=`${location.origin}/dex/#/`}return s.jsxs("div",{className:"search-token",children:[s.jsxs("div",{className:"header",children:[s.jsxs("div",{className:"search-input",children:[s.jsx("img",{src:A}),s.jsx("input",{type:"text",autoFocus:!0,value:a,onChange:k})]}),s.jsx("span",{onClick:()=>m(-1),children:t("cancel")})]}),s.jsxs("div",{className:"hot",children:[s.jsx("span",{className:"title",children:t("market")}),s.jsx("div",{className:"list",children:Object.keys(p).map(e=>s.jsx("span",{className:e===n?"active":"",onClick:()=>g(e),children:e},e))})]}),s.jsxs("div",{className:"result",children:[a.length?s.jsx("h4",{className:"title",children:t("search_results")}):null,o?s.jsxs("div",{className:"loading",children:[s.jsx("img",{src:U}),s.jsx("span",{children:t("searching")})]}):null,a.length>0&&r.length===0?s.jsxs("div",{className:"empty",children:[s.jsx("img",{src:$}),s.jsx("span",{children:t("no_search_content_yet")})]}):null,r.length?s.jsxs("div",{className:"list",children:[s.jsxs("div",{className:"title",children:[s.jsx("span",{children:t("currency")}),s.jsx("span",{children:t("last_price")}),s.jsx("span",{children:t("quote_change")})]}),r.map(e=>s.jsxs("div",{className:"list-item",onClick:()=>S(e),children:[s.jsxs("div",{className:"token",children:[e.token.logoURI?s.jsx("img",{className:"logo",src:e.token.logoURI}):s.jsx("i",{className:"logo"}),s.jsxs("span",{children:[s.jsxs("span",{children:[e.token.symbol,"/"]}),e.gold.symbol]})]}),s.jsx("span",{className:"price",children:x(e.price,3)}),s.jsx("span",{className:e.isDrop?"quote drop":"quote",children:e.quote})]},e.address))]}):null]})]})}export{O as default};
