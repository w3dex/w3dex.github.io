(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20abe1fa"],{"45e0":function(t,s,e){"use strict";e("c929")},"4fc1":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"sell-orders"},[s("div",{staticClass:"title"},[s("span",[t._v(t._s(t.$t("market.text1")))]),s("span",[t._v(t._s(t.$t("buyOrders.text1")))]),s("span",[t._v(t._s(t.$t("history.text6")))]),s("span",[t._v(t._s(t.$t("LatestDeals.text1")))]),s("span",[t._v(t._s(t.$t("buyOrders.text2")))])]),s("div",{staticClass:"list"},[t._l(t.orders,(function(e){return[s("div",{staticClass:"list-item"},[s("span",[t._v(t._s(e.token))]),s("span",[t._v(t._s(e.volume)),s("span",[t._v("/"+t._s(e.total))])]),s("span",[t._v(t._s(e.price))]),s("span",[t._v(t._s(e.time))]),s("div",[s("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!item.loading"}],on:{click:function(s){return t.cancel(e)}}},[t._v(t._s(t.$t("commission.text5")))]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"item.loading"}],attrs:{loading:"","loading-text":t.$t("commission.text6")}})],1)])]}))],2)])},a=[],o=(e("66b9"),e("b650")),r=e("2f62"),n=e("044d"),d=e("3aff"),l={components:{[o["a"].name]:o["a"]},data(){return{orders:[],interval:-1}},computed:{...Object(r["b"])(["address","web3","pair"])},created(){this.address&&this.web3&&(this.init(),this.autoReload())},destroyed(){this.closeAutoReload()},methods:{autoReload(){this.interval=setInterval(()=>{this.init()},5e3)},closeAutoReload(){clearInterval(this.interval)},cancel(t){t.loading=!0,this.closeAutoReload();const s=new this.web3.eth.Contract(d.abi,d.address),e=s.methods.cancelOrder([this.pair.token.address,this.pair.gold.address],t.orderIndex);e.call({from:this.address},(s,i)=>{s||e.send({from:this.address}).on("receipt",s=>{t.loading=!1,this.$emit("reload"),this.init(),this.autoReload()}).on("error",s=>{console.log(s),t.loading=!1,this.autoReload()})})},async init(){try{const t=new this.web3.eth.Contract(d.abi,d.address),s=await Object(n["c"])(this.pair.address,"address",this.address);if(s&&s.length>0){let e=[];s.forEach(t=>{t.isBuy||e.push(t.orderIndex)}),e.length>0?t.methods.userOnOrderInfo([this.pair.token.address,this.pair.gold.address],e).call((t,s)=>{if(!t){const{0:t,1:e,2:i,3:a,4:o}=s,r=[];e.forEach((s,e)=>{if(s>0){const n=i[e],d=n.toBN().minus(s).toFixed();r.push({token:`${this.pair.token.symbol}/${this.pair.gold.symbol}`,price:t[e].fromWei().toFixed(2),total:n.fromWei().toFixed(2),volume:d.fromWei().toFixed(2),time:o[e].format(),orderIndex:a[e],timestemp:Number(o[e]),loading:!1})}}),this.orders=r.sort((t,s)=>s.timestemp-t.timestemp)}}):this.orders=[]}else this.orders=[]}catch(t){}}}},c=l,h=c,u=(e("45e0"),e("2877")),m=Object(u["a"])(h,i,a,!1,null,"c123d23a",null);s["default"]=m.exports},c929:function(t,s,e){}}]);