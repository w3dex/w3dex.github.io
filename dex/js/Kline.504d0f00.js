(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Kline"],{"28e6":function(t,s,e){},"80f4":function(t,s,e){},ac09:function(t,s,e){"use strict";e.r(s);e("14d9");var i=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"kline"},[s("div",{staticClass:"navbar"},[s("img",{attrs:{src:e("ccfe")},on:{click:function(s){return t.$router.back()}}}),s("span",[t._v(t._s(t.pair.token.symbol)+"/"+t._s(t.pair.gold.symbol))])]),s("div",{staticClass:"detail"},[s("div",{staticClass:"left"},[s("span",[t._v(t._s(t.pair.price.toFixed(3)))]),s("span",{class:t.pair.isDrop?"drop":"rise"},[t._v(t._s(t.pair.quote))])]),s("div",{staticClass:"rigth"},[s("div",[s("div",[s("span",[t._v(t._s(t.$t("kline.text10")))]),s("span",[t._v(t._s(t.high24h.toFixed(2)))])]),s("div",[s("span",[t._v(t._s(t.$t("kline.text11",{symbol:t.pair.token.symbol})))]),s("span",[t._v(t._s(t.volume24h.toFixed(2,!0)))])])]),s("div",[s("div",[s("span",[t._v(t._s(t.$t("kline.text12")))]),s("span",[t._v(t._s(t.low24h.toFixed(2)))])]),s("div",[s("span",[t._v(t._s(t.$t("kline.text13",{symbol:t.pair.gold.symbol})))]),s("span",[t._v(t._s(t.total24h.toFixed(2,!0)))])])])])]),t._m(0),s("div",{staticClass:"tags"},[s("span",{class:{active:"orders"==t.tag},on:{click:function(s){t.tag="orders"}}},[t._v(t._s(t.$t("kline.text1")))]),s("span",{class:{active:"latest"==t.tag},on:{click:function(s){t.tag="latest"}}},[t._v(t._s(t.$t("kline.text2")))]),s("span",{class:{active:"info"==t.tag},on:{click:function(s){t.tag="info"}}},[t._v(t._s(t.$t("kline.text3")))])]),s("commission-orders",{directives:[{name:"show",rawName:"v-show",value:"orders"==t.tag,expression:"tag == 'orders'"}]}),s("latest-deals",{directives:[{name:"show",rawName:"v-show",value:"latest"==t.tag,expression:"tag == 'latest'"}],attrs:{bargains:t.bargains.slice(-20)}}),s("token-info",{directives:[{name:"show",rawName:"v-show",value:"info"==t.tag,expression:"tag == 'info'"}]}),s("div",{staticClass:"buttons"},[s("van-button",{on:{click:function(s){return t.$router.push({path:"/",query:{type:"buy"}})}}},[t._v(t._s(t.$t("kline.text4")))]),s("van-button",{on:{click:function(s){return t.$router.push({path:"/",query:{type:"sell"}})}}},[t._v(t._s(t.$t("kline.text5")))])],1)],1)},a=[function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"chart"},[s("div",{attrs:{id:"container"}})])}],o=(e("66b9"),e("b650")),n=e("2f62"),r=e("044d"),l=(e("3e75"),e("ea7f")),c=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"commission-orders"},[s("div",{staticClass:"tags"},[s("span",[t._v(t._s(t.$t("CommissionOrders.text1")))]),s("span",[t._v(t._s(t.$t("CommissionOrders.text2")))])]),s("div",{staticClass:"title"},[s("span",[t._v(t._s(t.$t("CommissionOrders.text3")))]),s("span",[t._v(t._s(t.$t("CommissionOrders.text4",{symbol:t.pair.gold.symbol})))]),s("span",[t._v(t._s(t.$t("CommissionOrders.text3")))]),s("span",[t._v(t._s(t.$t("CommissionOrders.text4",{symbol:t.pair.gold.symbol})))])]),s("div",{staticClass:"data"},[s("div",{staticClass:"list"},t._l(t.buys,(function(e,i){return s("div",{key:i,staticClass:"list-item buy"},[s("span",[t._v(t._s(e.amount.toFixed(2,!0)))]),s("span",[t._v(t._s(e.price.toFixed(2)))]),s("i",{style:{width:e.width}})])})),0),s("div",{staticClass:"list"},t._l(t.sells,(function(e,i){return s("div",{key:i,staticClass:"list-item sell"},[s("span",[t._v(t._s(e.amount))]),s("span",[t._v(t._s(e.price))]),s("i",{style:{width:e.width}})])})),0)])])},d=[],m=e("0319"),h=e("3aff"),p={data(){return{buys:[],sells:[]}},computed:{...Object(n["b"])(["web3","pair","goldDecimals","chainId"])},created(){this.web3&&this.init()},methods:{init(){const t=new this.web3.eth.Contract(h.abi,m["a"][this.chainId].Router);t.methods.priceAmount([this.pair.gold.address,this.pair.token.address],10).call((t,s)=>{if(console.log(t,s),!t){const{0:t,1:e}=s,i=[];let a="0".toBN();e.forEach((s,e)=>{const i=s.fromWei(this.pair.gold.decimals).toBN().div(t[e].fromWei(this.goldDecimals));a.lt(i)&&(a=i)}),e.forEach((s,e)=>{const o=t[e].fromWei(this.goldDecimals),n=s.fromWei(this.pair.gold.decimals).toBN().div(o).toFixed();i.push({price:o,amount:n,width:n.toBN().div(a).times(100).toFixed()+"%"})}),this.buys=i.sort((t,s)=>Number(s.price)-Number(t.price))}}),t.methods.priceAmount([this.pair.token.address,this.pair.gold.address],10).call((t,s)=>{if(!t){const{0:t,1:e}=s,i=[];let a="0".toBN();e.forEach(t=>{a.lt(t)&&(a=t.toBN())}),e.forEach((s,e)=>{i.push({price:t[e].fromWei(this.goldDecimals).toFixed(2),amount:s.fromWei(this.pair.token.decimals).toFixed(2,!0),width:s.toBN().div(a).times(100).toFixed()+"%"})}),this.sells=i.sort((t,s)=>Number(t.price)-Number(s.price))}})}}},u=p,v=u,_=(e("ba9c"),e("2877")),b=Object(_["a"])(v,c,d,!1,null,"ac966380",null),f=b.exports,x={components:{CommissionOrders:f,[o["a"].name]:o["a"],"latest-deals":()=>e.e("chunk-4071f1f4").then(e.bind(null,"ac46")),"token-info":()=>e.e("chunk-4bd8e6dc").then(e.bind(null,"b477"))},data(){return{tag:"orders",bargains:[],high24h:0,low24h:0,volume24h:0,total24h:0}},computed:{...Object(n["b"])(["pair","web3","goldDecimals","chainId"])},async mounted(){const t=Math.floor((new Date).getTime()/1e3),s=t-86400;Object(r["a"])(this.pair.address,t,s).then(t=>{if(t&&t.length>0){let s="0".toBN(),e="1e18".toBN(),i="0".toBN(),a="0".toBN();t.forEach(t=>{const o=t.price.fromWei(this.goldDecimals).toBN(),n=t.amount.fromWei(this.pair.token.decimals);s.lt(o)&&(s=o),e.gt(o)&&(e=o),i=i.plus(n),a=a.plus(o.times(n))}),this.high24h=s.toFixed(),this.low24h=e.toFixed(),this.volume24h=i.toFixed(),this.total24h=a.toFixed()}}),Object(r["a"])(this.pair.address,!1).then(t=>{if(t&&t.length>0){this.bargains=t;const s=[];t.sort((t,s)=>Number(t.time)-Number(s.time)).forEach(t=>{s.push([1e3*parseInt(t.time),Number(t.price.fromWei(this.goldDecimals))])}),this.initChart(s)}})},methods:{initChart(t){l["chart"]("container",{chart:{zoomType:"x"},title:{text:this.$t("kline.text6",{symbol:this.symbol})},subtitle:{text:void 0===document.ontouchstart?this.$t("kline.text9"):this.$t("kline.text7")},xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%m-%d",week:"%m-%d",month:"%Y-%m",year:"%Y"}},tooltip:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%Y-%m-%d",week:"%m-%d",month:"%Y-%m",year:"%Y"}},yAxis:{title:{text:null}},legend:{enabled:!1},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,(new l["getOptions"]).colors[0]],[1,new l["Color"](l["getOptions"]().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{data:t,name:this.$t("kline.text8"),type:"area"}]})}}},g=x,y=g,k=(e("c8e1"),Object(_["a"])(y,i,a,!1,null,"1f63ac33",null));s["default"]=k.exports},ba9c:function(t,s,e){"use strict";e("28e6")},c8e1:function(t,s,e){"use strict";e("80f4")},ccfe:function(t,s,e){t.exports=e.p+"img/back.dba1862e.svg"}}]);