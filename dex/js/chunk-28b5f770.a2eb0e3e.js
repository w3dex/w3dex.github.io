(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28b5f770"],{b73e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("van-popup",{attrs:{position:"left"},on:{click:function(e){t.show=!1}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"menus",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("market.text1")))])]),e("div",{staticClass:"search-bar"},[e("van-icon",{attrs:{name:"search"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",placeholder:t.$t("market.text2")},domProps:{value:t.searchValue},on:{input:[function(e){e.target.composing||(t.searchValue=e.target.value)},t.searchPair]}})],1),e("div",{staticClass:"markets-symbol"},t._l(t.golds,(function(s){return e("span",{class:{active:t.goldSymbol===s.symbol},on:{click:function(e){return t.selectGoldSymbol(s.symbol)}}},[t._v(t._s(s.symbol))])})),0),e("div",{staticClass:"tags"},[e("span",[t._v(t._s(t.$t("market.text3")))]),e("div",{on:{click:t.sortForPrice}},[e("span",[t._v(t._s(t.$t("market.text4")))]),e("img",{attrs:{src:s("133b")}})]),e("div",{on:{click:t.sortForQuote}},[e("span",[t._v(t._s(t.$t("market.text5")))]),e("img",{attrs:{src:s("133b")}})])]),e("div",{staticClass:"list"},[t._l(t.filterList,(function(s){return e("div",{directives:[{name:"show",rawName:"v-show",value:!t.searching,expression:"!searching"}],key:s.pair,staticClass:"list-item",on:{click:function(e){return t.changePair(s)}}},[e("div",{staticClass:"token"},[e("img",{attrs:{src:s.token.logoURI}}),e("span",[t._v(t._s(s.token.symbol)),e("span",[t._v("/"+t._s(s.gold.symbol))])])]),e("span",[t._v(t._s(s.price.toFixed(2)))]),e("span",{class:s.isDrop?"drop":"rise"},[t._v(t._s(s.quote))])])})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],staticClass:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#F2B60A"}}),e("span",[t._v(t._s(t.$t("searching")))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.searching&&t.searchValue.length&&0===t.filterList.length,expression:"!searching && searchValue.length && filterList.length === 0"}],staticClass:"empty"},[e("img",{attrs:{src:s("8479")}}),e("span",[t._v(t._s(t.$t("no_search_content_yet")))])])],2)])])},o=[],a=(s("68ef"),s("a71a"),s("9d70"),s("3743"),s("4d75"),s("e41f")),r=(s("ac1e"),s("543e")),l=(s("c3a6"),s("ad06")),c=(s("14d9"),s("2f62")),n=s("044d"),h=s("6b46"),d=s("25ba"),m=s("ed08"),u=s("d925"),g=s("b9cc"),f={components:{[l["a"].name]:l["a"],[r["a"].name]:r["a"],[a["a"].name]:a["a"]},data(){return{show:!1,golds:d,goldSymbol:"USDT",list:[...h["b"]],filterList:[...h["b"]],searchValue:"",priceDirection:"default",quoteDirection:"default",searching:!1}},computed:{...Object(c["b"])(["web3","pair"])},async created(){const t=sessionStorage.getItem("pairList");t&&(this.list=[...JSON.parse(t)],this.filterList=this.list.filter(t=>t.gold.symbol===this.goldSymbol));const e=[...h["b"]];for(let i=0;i<h["b"].length;i++)try{const t=await Object(n["a"])(h["b"][i].address);if(t.length>0){const s=t[0].price.fromWei(this.pair.gold.decimals);e[i].price=s;const o=Math.floor((new Date).getTime()/1e3),a=86400*Math.floor(o/86400),r=await Object(n["a"])(h["b"][i].address,a);if(r.length>0){const t=r[0].price.fromWei(this.pair.gold.decimals).toBN();e[i].isDrop=t.gt(s);const o=t.gt(s)?t.minus(s):s.toBN().minus(t),a=o.div(t).times(100).toFixed().toFixed(2);t.gt(s)?e[i].quote=`-${a}%`:e[i].quote=`+${a}%`}}this.list[i]=e[i]}catch(s){console.error(s);continue}this.filterList=e.filter(t=>t.gold.symbol===this.goldSymbol),sessionStorage.setItem("pairList",Object(m["a"])(e))},methods:{open(){this.show=!0},changePair(t){this.$store.commit("setPair",t),sessionStorage.setItem("pair",Object(m["a"])(t)),this.$store.commit("setShow",!1),this.$nextTick(()=>{this.$store.commit("setShow",!0)})},selectGoldSymbol(t){if(this.goldSymbol=t,this.quoteDirection="default",this.priceDirection="default",this.searchValue.length)return this.searchPair();this.filterList=this.list.filter(e=>e.gold.symbol===t)},sortForPrice(){"desc"===this.priceDirection?(this.filterList=this.list.filter(t=>t.gold.symbol===this.goldSymbol).sort((t,e)=>Number(t.price)-Number(e.price)),this.priceDirection="asc"):(this.filterList=this.list.filter(t=>t.gold.symbol===this.goldSymbol).sort((t,e)=>Number(e.price)-Number(t.price)),this.priceDirection="desc"),"default"!==this.quoteDirection&&(this.quoteDirection="default")},sortForQuote(){"desc"===this.quoteDirection?(this.filterList=this.list.filter(t=>t.gold.symbol===this.goldSymbol).sort((t,e)=>Number(t.quote.slice(0,-1))-Number(e.quote.slice(0,-1))),this.quoteDirection="asc"):(this.filterList=this.list.filter(t=>t.gold.symbol===this.goldSymbol).sort((t,e)=>Number(e.quote.slice(0,-1))-Number(t.quote.slice(0,-1))),this.quoteDirection="desc"),"default"!==this.priceDirection&&(this.priceDirection="default")},async getPriceInfo(t){const e=Math.floor((new Date).getTime()/1e3),s=86400*Math.floor(e/86400),i=await Object(n["a"])(t),o=await Object(n["a"])(t,s);let a="0",r="+0%",l=!1;if(i.length){const t=i[0].price.fromWei(this.pair.gold.decimals);if(a=t,o.length){const e=o[0].price.fromWei(this.pair.gold.decimals).toBN(),s=e.gt(t)?e.minus(t):t.toBN().minus(e),i=s.div(e).times(100).toFixed().toFixed(2);l=e.gt(t),r=l?`-${i}%`:`+${i}%`}}return{price:a,quote:r,isDrop:l}},async searchPair(){if(0===this.searchValue.length)return void(this.filterList=this.list.filter(t=>t.gold.symbol===this.goldSymbol));if(!this.web3.utils.isAddress(this.searchValue))return void(this.filterList=[]);this.searching=!0;const t=[];for(let e=0;e<this.filterList.length;e++){if(!this.filterList[e].token.address.toBN().eq(this.searchValue))continue;const s=await this.getPriceInfo(this.filterList[e].address);t.push({...this.filterList[e],...s});break}if(0===t.length){const e=new this.web3.eth.Contract(u.abi,u.address),s=await e.methods.getPair(this.searchValue,d[this.goldSymbol].address).call();if(s.toBN().gt(0)){const e=new this.web3.eth.Contract(g,this.searchValue),i=await this.getPriceInfo(s),o=await e.methods.symbol().call(),a=await e.methods.decimals().call();t.push({...i,gold:d[this.goldSymbol],token:{symbol:o,decimals:a,name:"",address:this.searchValue},logoURI:"",address:s})}}this.filterList=t,this.searching=!1}}},p=f,b=p,v=(s("e247"),s("2877")),w=Object(v["a"])(b,i,o,!1,null,"040b6f5c",null);e["default"]=w.exports},dfa5:function(t,e,s){},e247:function(t,e,s){"use strict";s("dfa5")}}]);