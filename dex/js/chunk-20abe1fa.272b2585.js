(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20abe1fa"],{"45e0":function(t,e,s){"use strict";s("c929")},"4fc1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"sell-orders"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("market.text1")))]),e("span",[t._v(t._s(t.$t("buyOrders.text1")))]),e("span",[t._v(t._s(t.$t("history.text6")))]),e("span",[t._v(t._s(t.$t("LatestDeals.text1")))]),e("span",[t._v(t._s(t.$t("buyOrders.text2")))])]),e("div",{staticClass:"list"},[t._l(t.orders,(function(s){return[e("div",{staticClass:"list-item"},[e("span",[t._v(t._s(s.token))]),e("span",[t._v(t._s(s.volume)),e("span",[t._v("/"+t._s(s.total))])]),e("span",[t._v(t._s(s.price))]),e("span",[t._v(t._s(s.time))]),e("div",[e("van-button",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!item.loading"}],on:{click:function(e){return t.cancel(s)}}},[t._v(t._s(t.$t("commission.text5")))]),e("van-button",{directives:[{name:"show",rawName:"v-show",value:s.loading,expression:"item.loading"}],attrs:{loading:"","loading-text":t.$t("commission.text6")}})],1)])]}))],2)])},a=[],o=(s("66b9"),s("b650")),r=(s("14d9"),s("2f62")),n=s("044d"),d=s("0319"),l=s("3aff"),c={components:{[o["a"].name]:o["a"]},data(){return{orders:[],interval:-1}},computed:{...Object(r["b"])(["address","web3","pair","goldDecimals","chainId"])},created(){this.address&&this.web3&&(this.init(),this.autoReload())},destroyed(){this.closeAutoReload()},methods:{autoReload(){this.interval=setInterval(()=>{this.init()},5e3)},closeAutoReload(){clearInterval(this.interval)},cancel(t){t.loading=!0,this.closeAutoReload();const e=new this.web3.eth.Contract(l.abi,d["a"][this.chainId].Router),s=e.methods.cancelOrder([this.pair.token.address,this.pair.gold.address],t.orderIndex);s.call({from:this.address},(e,i)=>{e||s.send({from:this.address}).on("receipt",e=>{t.loading=!1,this.$emit("reload"),this.init(),this.autoReload()}).on("error",e=>{console.log(e),t.loading=!1,this.autoReload()})})},async init(){try{const t=new this.web3.eth.Contract(l.abi,d["a"][this.chainId].Router),e=await Object(n["d"])(this.pair.address,"address",this.address);if(e&&e.length>0){let s=[];e.forEach(t=>{t.isBuy||s.push(t.orderIndex)}),s.length>0?t.methods.userOnOrderInfo([this.pair.token.address,this.pair.gold.address],s).call((t,e)=>{if(!t){const{0:t,1:s,2:i,3:a,4:o}=e,r=[];s.forEach((e,s)=>{if(e>0){const n=i[s].fromWei(this.pair.token.decimals),d=n.toBN().minus(e.fromWei(this.pair.token.decimals)).toFixed();r.push({token:`${this.pair.token.symbol}/${this.pair.gold.symbol}`,price:t[s].fromWei(this.goldDecimals).toFixed(2),total:n.toFixed(2),volume:d.toFixed(2),time:o[s].format(),orderIndex:a[s],timestemp:Number(o[s]),loading:!1})}}),this.orders=r.sort((t,e)=>e.timestemp-t.timestemp)}}):this.orders=[]}else this.orders=[]}catch(t){}}}},h=c,m=h,u=(s("45e0"),s("2877")),p=Object(u["a"])(m,i,a,!1,null,"c123d23a",null);e["default"]=p.exports},c929:function(t,e,s){}}]);